<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Strict//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Society Generation -- HOWTO</title>
</head>
<body>
<h1>Society Generation HOWTO</h1>
<h2>Contents</h2>
<ol>
<li><a href="#overview">Overview</a></li>
<li><a href="#required">Required Software</a></li>
<li><a href="#facets">Facet Files</a></li>
<li><a href="#societies">Society Files</a></li>
</ol>
<a name="overview"><h2>Overview</h2></a>
<p>All societies are now generated from CSV files.  The society generation process
consists of two parts: The generation of a facet configuration and the generation of a society
(sometimes called plugins) configuration file.<br>
For all of the 1AD societies, facet files are easily generated from the CSV files using a simple
script.  For the UA societies however, a special tool: <em>SocietyDesigner</em> is required.
</p>
<a name="required"><h2>Required Software</h2></a>
<p>
To run the society generation scripts, the following software is required:
<ul>
<li>Ruby</li>
<li>CSV Package for Ruby</li>
<li>Ability to run a shell script (cyg-win on windows)</li>
</ul>
</p>
<a name="facets"><h2>Facet Files</h2></a>
<p>A facets file is a pre-configuration file that contains the basic information about each
agent within that configuration.  It is just like a society file,
except that it contains no actual Plugins or components - just facets
- (attributes) on the agents. The information contained in each agent is used by a set of
<tt>Ruby</tt> rules (just normal ACME rules) to determine which
plugins should be inserted into the agent. <br>
Facets are broken up into two seperate sections, the 1AD facets and the UA facets, however
both facet files look similar (in fact, one facet indicates whether
the agent is a UA agent or a 1AD agent).</p>
<h3>1AD Facets</h3>
<p>Most 1AD facet files that you might need are already generated, in
the "1ad" subdirectory. To generate different facet files (excluding
some thread of supply, or because membership or other items in the CSV
files have changed), there are two seperate scripts for generating a 1AD facets file.<br>
<h3>gen-facets-xml.sh</h3>
This file generates a single facets file based on the given parameter(s).
The script takes one required parameter, the partial name of the members file.  And one optional
parameter, the thread or threads to exclude for the society.<br>
When excluding threads you can use the following options: <br>
<ul>
<li>1 - Excludes Subsistence</li>
<li>3 - Excludes Bulk POL</li>
<li>P - Exculdes Packaged POL</li>
<li>5 - Excludes Ammo</li>
<li>9 - Excludes Spare Parts</li>
<li>S - Excludes Strategic Transportation</li>
</ul>
When specifying these parameters, do not place a space between them.  For example:
<pre>
% gen-facets-xml.sh micro-1ad 1PS
</pre>
A list of current member files that can be used to generate facets are:
<ul>
<li>single-1ad</li>
<li>micro-1ad</li>
<li>micro-1ad-trans-stub</li>
<li>tiny-1ad</li>
<li>tiny-1ad-trans-stub</li>
<li>small-1ad</li>
<li>small-1ad-trans-stub</li>
<li>full-1ad</li>
<li>full-1ad-trans-stub</li>
</ul>
<h3>make-facet-societies.sh</h3>
This script makes all of the basic facet societies, including all of the threads.<br>
Currently the base set of facet files are located in the <tt>1ad</tt> directory in <tt>configs/org_agent_builder</tt>.  The
only reason these configurations would need to be re-generated would be if the CSV files changed.
If that happens, running the script: <tt>make-facet-societies.sh</tt> will re-generate all of the
facet configuration files.</p>
<h3>UA Facets</h3>
<p>Most UA facet files that you might need are included in the 1ad.1ua
directory. Note that all UA facet files are actually combinations of
UA agents with the basic 1AD facet files - you need NCA and other 1AD -
agents for the UA to do anything. <br>
To regenerate the UA facets (or generate different UA societies), you must use the <em>SocietyDesigner</em> tool.  This tool,
located in this module allows the rolling up and un-rolling of the UA
agents.  To begin using this tool, you may download built jar files
using the SocietyDesigner overlay. Then run the
csmart/bin/SocietyDesigner script. Note that this same program may
also be used to generate the 1AD configurations. For more information on
using this tool, please consult the tool documentation.</p>
<a name="societies"><h2>Society Files</h2></a>
<p>To run a configuration, you need a society file.  Society files can be found in this module,
<tt>config/societies/[ad|ua]</tt>.  However if you need to generate a new society file, there exists a
single script to assist.  The script <tt>gen-plugins-xml.sh</tt> can be used to generate a single society.<br>
The usage of this script is:
<pre>% gen-plugins-xml.sh [society]</pre> Where society is the partial path and name of the society that you wish to generate.<br>
For example: <br>
<pre>
% gen-plugins-xml.sh 1ad/tiny-1ad
</pre>
Would generate a tiny-1ad society in the current directory using the facets file located in the 1ad/ directory.<br>
The basic 1AD Societies are: <br>
<ul>
<li>tiny-1ad</li>
<li>tiny-1ad-trans</li>
<li>small-1ad</li>
<li>small-1ad-trans</li>
<li>full-1ad</li>
<li>full-1ad-trans</li>
</ul>
If you wish to generate all societies in a zipped file, use the scripts: <br>
<tt>create-ad-dist.sh</tt> or <tt>create-ua-dist.sh</tt>.
Running these scripts, at heart, simply does the ACME TransformSociety
action (or runs the transform_society.rb script), applying the ACME
Ruby rules in the base_rules directory to the appropriate facets files.
</p>

</body>
</html>
