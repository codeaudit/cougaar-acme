####################################################
# Rule to insert TranscomRouterVishnuPlugin
# It only is used by the TRANSCOM-20 org (echelon_group = "Transcom")
# It only gets the arg at TRANSCOM ??? (role = 'StrategicTransportationProvider', rolemechanism = 'TaskSorter')
# 
# plugin = org.cougaar.logistics.plugin.trans.TranscomRouterVishnuPlugin

transcom_router_vishnu_plugin = "org.cougaar.logistics.plugin.trans.TranscomRouterVishnuPlugin"

society.each_agent do |agent|
  if agent.get_facet(:echelon_group) == "Transcom"
    if agent.has_facet? { |facet| facet[:role]=='StrategicTransportationProvider' && (facet[:mechanism] == 'TaskSorter') }
      agent.add_component do |c|
        c.classname = transcom_router_vishnu_plugin
      end
    end
  end
end
