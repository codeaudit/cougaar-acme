####################################################
# Rule to insert Ship Packer Plugins
# Just at ShipPacker: (echelon_group = "Transcom") && (role = "ShipPackingTransportationProvider")
# plugin = org.cougaar.logistics.plugin.trans.SeaVishnuPlugin(envFile=GLMT.Transport.env.xml,defaultFormat=GLMT.ShipPacker.dff.xml)
# plugin = org.cougaar.logistics.plugin.trans.TransportAllocatorPlugin(envFile=GLMT.SimpleTransport.env.xml)
# plugin = org.cougaar.logistics.plugin.trans.SeaTransportExpanderPlugin(envFile={String}GLMT.SimpleTransport.env.xml)

sea_vishnu_plugin = "org.cougaar.logistics.plugin.trans.SeaVishnuPlugin"
transport_allocator_plugin = "org.cougaar.logistics.plugin.trans.TransportAllocatorPlugin"
sea_transport_expander_plugin = "org.cougaar.logistics.plugin.trans.SeaTransportExpanderPlugin"

society.each_agent do |agent|
  if agent.get_facet(:echelon_group) == "Transcom"
    agent.each_facet(:role) do |facet|
      if facet[:role] == "ShipPackingTransportationProvider"
        agent.add_component do |c|
          c.classname = sea_vishnu_plugin
          c.add_argument("envFile=ShipPacker.env.xml")
        end
        agent.add_component do |c|
          c.classname = transport_allocator_plugin
          c.add_argument("envFile=GLMT.Transport.env.xml")
        end
        agent.add_component do |c|
          c.classname = sea_transport_expander_plugin
          c.add_argument("envFile=GLMT.Transport.env.xml")
        end
      end
    end
  end
end
