####################################################
# Rule to insert GLSExpander and GLSAllocator Plugins with arguments
# plugin = org.cougaar.mlm.plugin.organization.GLSAllocatorPlugin
# plugin = org.cougaar.mlm.plugin.organization.GLSExpanderPlugin
### OLD-FORM:  plugin = org.cougaar.mlm.plugin.organization.GLSExpanderPlugin(Ammunition,BulkPOL,ClassISubsistence,Consumable,MaintainInventory,PackagedPOL,StrategicTransportation)
### NEW-FORM:  plugin = org.cougaar.mlm.plugin.organization.GLSExpanderPlugin(Ammunition,BulkPOL,Consumable,MaintainInventory,PackagedPOL,StrategicTransportation,Subsistence)

gls_allocator_plugin = "org.cougaar.mlm.plugin.organization.GLSAllocatorPlugin"
gls_expander_plugin = "org.cougaar.mlm.plugin.organization.GLSExpanderPlugin"

society.each_agent do |agent|
  agent.add_component do |c|
    c.classname = gls_expander_plugin
    if agent.get_facet(:has_equipment_assets)
      c.add_argument("Ammunition")
      c.add_argument("BulkPOL")
      c.add_argument("PackagedPOL")
      c.add_argument("Consumable")
    end
    if agent.get_facet(:has_personnel_assets)
      c.add_argument("Subsistence")
    end
    if agent.get_facet(:has_personnel_assets) || agent.get_facet(:has_equipment_assets)
      c.add_argument("MaintainInventory")
      if agent.get_facet(:is_deployable)
        c.add_argument("StrategicTransportation")
      end
    end
  end
  agent.add_component do |c|
    c.classname = gls_allocator_plugin
  end
end