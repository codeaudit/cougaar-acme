####################################################
# Rule to insert other prototype creation Plugins
# plugin = org.cougaar.mlm.plugin.xml.XMLPrototypeProviderPlugin
### OLD: plugin = org.cougaar.logistics.plugin.demand.projection.LogMEILDMPlugin(icisMEI.q,+PrototypeProvider)
### NEW: plugin = org.cougaar.logistics.ldm.MEIPrototypeProvider(MEI.q,-PrototypeProvider)
### OLD: plugin = org.cougaar.logistics.plugin.demand.projection.LogPartsLDMPlugin(icisParts.q,+PrototypeProvider)
### NEW: plugin = org.cougaar.logistics.ldm.PartsPrototypeProvider(Parts.q)
#
# Must be loaded before asset providers, so name changed to aaa_prototype_createion.rule

xml_prototype_provider_plugin = "org.cougaar.mlm.plugin.xml.XMLPrototypeProviderPlugin"
mei_prototype_provider = "org.cougaar.logistics.ldm.MEIPrototypeProvider"
parts_prototype_provider = "org.cougaar.logistics.ldm.PartsPrototypeProvider"

society.each_agent do |agent|
  if agent.get_facet(:has_physical_assets)
    agent.add_component do |c|
      c.classname = xml_prototype_provider_plugin
      # Make the XMLPrototypeProvider loaded at BINDER priority
	  # so LDMSQLPlugin always has it - see Bug #1411
	  # Comment out for now c.priority = "BINDER"
    end
  end
  if agent.get_facet(:has_equipment_assets)
    agent.add_component do |c|
      c.classname = mei_prototype_provider
      c.add_argument("MEI.q")
      c.add_argument("-PrototypeProvider")
    end
    agent.add_component do |c|
      c.classname = parts_prototype_provider
      c.add_argument("Parts.q")
    end
  end
end
