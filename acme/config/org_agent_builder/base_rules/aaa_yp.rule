####################################################
# Rule to insert YP related Plugins
#
# At every agent:
# plugin = org.cougaar.yp.YPClientComponent
#
# At The YP Master org 
# plugin = org.cougaar.yp.YPServer
# plugin = org.cougaar.servicediscovery.util.yp.PublishTaxonomy


yp_client_component = "org.cougaar.yp.YPClientComponent"
yp_server = "org.cougaar.yp.YPServer"
publish_taxonomy = "org.cougaar.servicediscovery.util.yp.PublishTaxonomy"

society.each_agent do |agent|
    agent.add_component do |c|
      c.classname = yp_client_component
	  c.insertionpoint = "Node.AgentManager.Agent.YPService"
    end
  agent.each_facet(:role) do |facet|
    if facet[:role] == 'LogisticsCommanderInChief'
      agent.add_component do |c|
        c.classname = yp_server
      end
      agent.add_component do |c|
        c.classname = publish_taxonomy
      end
    end
  end
end
